<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:SubsTracker.ViewModels"
             x:Class="SubsTracker.Views.InsightsPage"
             Title="Insights"
             BackgroundColor="{AppThemeBinding Light=#F0F0F0, Dark=#121212}">

    <ScrollView>
        <VerticalStackLayout Spacing="15" Padding="20">

            <Frame Padding="20" CornerRadius="15" HasShadow="True" BackgroundColor="{StaticResource Primary}">
                <StackLayout>
                    <Label Text="Total Monthly" TextColor="#CCFFFFFF" FontSize="14"/>
                    <Label Text="{Binding TotalMonthlyExpenses, StringFormat='${0:F2}'}" 
                           TextColor="White" 
                           FontSize="36" 
                           FontAttributes="Bold"/>
                </StackLayout>
            </Frame>

            <Frame Padding="20" CornerRadius="15" HasShadow="True">
                <StackLayout>
                    <Label Text="Estimated Yearly Cost" TextColor="Gray" FontSize="14"/>
                    <Label Text="{Binding EstimatedYearlyExpenses, StringFormat='${0:F2}'}" 
                           TextColor="{AppThemeBinding Light=Black, Dark=White}" 
                           FontSize="28" 
                           FontAttributes="Bold"/>
                    <Label Text="*Based on current active subscriptions" FontSize="10" TextColor="Gray" Margin="0,5,0,0"/>
                </StackLayout>
            </Frame>

            <Frame Padding="20" CornerRadius="15" HasShadow="True">
                <Grid RowDefinitions="Auto, Auto, Auto" ColumnDefinitions="*, Auto">
                    <Label Grid.Row="0" Grid.ColumnSpan="2" Text="Most Expensive" TextColor="Gray" FontSize="14" Margin="0,0,0,10"/>

                    <Label Grid.Row="1" Grid.Column="0" 
                           Text="{Binding MostExpensiveName}" 
                           FontSize="18" 
                           FontAttributes="Bold"/>

                    <Label Grid.Row="1" Grid.Column="1" 
                           Text="{Binding MostExpensivePrice, StringFormat='${0:F2}'}" 
                           FontSize="18" 
                           TextColor="#FF453A"/>
                </Grid>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>